<div *ngIf="true" style="display: block">
  <button (click)="logout()">Logout</button>
</div>
<div *ngIf="true" style="display: block">
  <h1>Login</h1>
  {{ authErrorMessage() }}
  <form [formGroup]="loginForm" (ngSubmit)="login()" autocomplete="none">
    <div>
      <mat-form-field>
        <mat-label>E-mail</mat-label>
        <input
          type="email"
          matInput
          formControlName="email"
          autocomplete="none"
        />
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Password</mat-label>
        <input
          type="password"
          matInput
          formControlName="password"
          autocomplete="none"
        />
      </mat-form-field>
    </div>
    <input type="submit" />
  </form>
</div>
<div style="display: block">
  <h1>Submit a Race</h1>
  <form
    #formGroupDirective="ngForm"
    [formGroup]="submitRaceForm"
    (ngSubmit)="submitRace(formGroupDirective)"
    autocomplete="none"
  >
    <div>
      <mat-form-field class="example-full-width">
        <mat-label>Race</mat-label>
        <input
          type="text"
          matInput
          formControlName="race"
          [matAutocomplete]="auto"
          autocomplete="none"
        />
        <mat-autocomplete
          #auto="matAutocomplete"
          autoActiveFirstOption
          [requireMatch]="true"
          [displayWith]="raceDisplayFn"
        >
          <mat-option *ngFor="let race of filteredRaces()" [value]="race">
            <div
              class="race-option"
              style="display: inline-flex; align-items: center"
            >
              {{ race.name }}
              <span style="font-size: 0.75rem; color: gray">
                ({{ race.start_date.toString().slice(0, 10) }})
              </span>
            </div>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Bib Number</mat-label>
        <input
          type="text"
          matInput
          formControlName="bibNumber"
          autocomplete="none"
        />
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Total Time</mat-label>
        <input
          type="text"
          matInput
          appTimeFormat
          formControlName="totalTime"
          autocomplete="none"
          placeholder="HH:MM:SS"
          maxlength="8"
          minlength="8"
        />
      </mat-form-field>
    </div>
    <input type="submit" />
  </form>
</div>
<div style="display: block">
  <h1>Create a Race</h1>
  <form
    #formGroupDirective="ngForm"
    class="example-form"
    [formGroup]="form"
    (ngSubmit)="handleSubmit(formGroupDirective)"
    autocomplete="none"
  >
    <div>
      <mat-form-field>
        <mat-label>Name of Race</mat-label>
        <input
          type="text"
          matInput
          formControlName="raceName"
          autocomplete="none"
        />
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="example-full-width">
        <mat-label>Town</mat-label>
        <input
          type="text"
          matInput
          formControlName="townName"
          [matAutocomplete]="autoTown"
          autocomplete="none"
        />
        <mat-autocomplete
          #autoTown="matAutocomplete"
          autoActiveFirstOption
          [requireMatch]="true"
          [displayWith]="displayFn"
        >
          <mat-option
            *ngFor="let option of filteredOptions | async"
            [value]="option"
          >
            {{ option.name }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Distance</mat-label>
        <input
          type="number"
          step=".01"
          matInput
          formControlName="distanceValue"
          matNativeControl
        />
      </mat-form-field>
      <mat-slide-toggle
        color="primary"
        [checked]="form.get('kilometers')?.value ?? true"
        formControlName="kilometers"
        >Kilometers?</mat-slide-toggle
      >
    </div>
    <div>
      <mat-form-field>
        <mat-label>Start Time</mat-label>
        <input type="datetime-local" matInput formControlName="startTime" />
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Address Line One</mat-label>
        <input type="text" matInput formControlName="addressLineOne" />
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Website URL</mat-label>
        <input type="text" matInput formControlName="websiteUrl" />
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Results URL</mat-label>
        <input type="text" matInput formControlName="resultsUrl" />
      </mat-form-field>
    </div>
    <input type="submit" />
  </form>
</div>
